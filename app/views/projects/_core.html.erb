<div id='core_container' class='span6'>

<h5>Title 
	<% if allow? :projects, :edit  %> 
	<%= link_to '', edit_project_path(@project, :updating_unique_attribute=>'projectname'), :class=>'editProjectSingleField icon-pencil', 
		:title=>'Edit Project Title', 							
		'data-attribute'=>'projectname',					
		:remote=>true %></h5>
	<% end %>
	<div class='projectname_container' style='word-wrap: break-word;'>
	<span id='projectname' ><%= @project.projectname %></span>
	</div>

	<div style='width:90%;word-wrap: break-word;'>
		 <h5>Description 
 		<%# if allow_param? :projects, :projectdesc %>
 	<% if allow? :projects, :edit  %> 
		 	
 		<%= link_to '', edit_project_path(@project, :updating_unique_attribute=>'projectdesc'), :class=>'editProjectSingleField icon-pencil', 
		:title=>'Edit Project Description', 							
		'data-attribute'=>'projectdesc',					
		:remote=>true %>
	<% end %>
	</h5>
	<div class='projectdesc_container'>
	<span id='projectdesc' ><%= markdown(@project.projectdesc) %></span>
	</div>
	</div>


 <% @project.applications.each do |app| %>


 	<h5>Start date 
 	<% if allow? :projects, :edit  %> 
	<%= link_to '', edit_application_path(app, :updating_unique_attribute=>'startdate'), :class=>'editAppSingleField icon-pencil', 
		:title=>'Edit Application Start Date', 							
		'data-attribute'=>'startdate',					
		:remote=>true %>
	<% end %>
 </h5>

	<div class='startdate_container'>
	<span id='app_start' ><%= app.startdate.to_date %></span>
	</div>

 <h5>End date 
 <% if allow? :projects, :edit  %> 
  	
 	<%= link_to '', edit_application_path(app, :updating_unique_attribute=>'enddate'), :class=>'editAppSingleField icon-pencil', 
		:title=>'Edit Application End Date', 							
		'data-attribute'=>'enddate',					
		:remote=>true %>
<% end %>
	
</h5>
	<div class='enddate_container'>
	<span id='app_end' ><%= app.enddate.to_date %></span>
</div>

	 	<h5>Corporate File Number 
	 	<% if allow? :projects, :edit  %> 
		<%= link_to '', edit_application_path(app, :updating_unique_attribute=>'corporate_file_number'), :class=>'editAppSingleField icon-pencil', 
			:title=>'Edit Corporate File Number', 							
			'data-attribute'=>'corporate_file_number',					
			:remote=>true %>
		<% end %>
	 </h5>

	<div class='corporate_file_number_container'>
	<span id='appcorp' ><%= app.corporate_file_number %></span>
	</div>

	<h5>Requested Amount 
	 	<% if allow? :projects, :edit  %> 
		<%= link_to '', edit_application_path(app, :updating_unique_attribute=>'requested'), :class=>'editAppSingleField icon-pencil', 
			:title=>'Edit Requested Amount', 							
			'data-attribute'=>'requested',					
			:remote=>true %>
		<% end %>
	 </h5>

	<div class='requested_container'>
	<span id='requested' >$<%= number_with_precision(app.requested, 
        :precision => 2, separator: '.', delimiter: ',') || 0.00 %></span>
	</div>

 
 	<h5>Requested Amount (Other Sources) 
	 	<% if allow? :projects, :edit  %> 
		<%= link_to '', edit_application_path(app, :updating_unique_attribute=>'requested_other'), :class=>'editAppSingleField icon-pencil', 
			:title=>'Edit Requested Amount (other sources)', 							
			'data-attribute'=>'requested_other',					
			:remote=>true %>
		<% end %>
	 </h5>

	<div class='requested_other_container'>
	<span id='requested_other' >$<%= number_with_precision(app.requested_other, 
        :precision => 2, separator: '.', delimiter: ',') || 0.00 %></span>
	</div>		 			 	
 <% end %>
</div>



<script type="text/javascript">
$(document).on('click', '.editProjectSingleField', function() {

	var attribute = $(this).attr('data-attribute')	
	//$('#'+attribute).css('display', 'none');

	var link = this.href + '&layout="false"'	
	$('.'+attribute+'_container').load(link);
	//$('.edit_container').appendTo('.'+attribute+'_container')
	//return false;
	 $('.editProjectSingleField').hide();
	 $('.editAppSingleField').hide();
		
})

$(document).on('click', '.editAppSingleField', function() {

	var attribute = $(this).attr('data-attribute')	
	//$('#'+attribute).css('display', 'none');

	var link = this.href + '&layout="false"'	
	$('.'+attribute+'_container').load(link);
	//$('.edit_container').appendTo('.'+attribute+'_container')
	//return false;
	$('.editProjectSingleField').hide();
	 $('.editAppSingleField').hide();
	// $('.editProjectSingleField').attr('style', 'display:none;')
	// $('.editAppSingleField').attr('style', 'display:none;')
		
})

</script>
